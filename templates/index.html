<!DOCTYPE html>
<html>
<body>
    <h1>Ma M√©t√©o Python</h1>
    <button onclick="trouverMaMeteo()">üìç Me localiser et voir la m√©t√©o</button>
    <div id="resultat"></div>

    <script>
        function trouverMaMeteo() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(envoyerAuPython, gererErreur);
            } else {
                alert("G√©olocalisation non support√©e");
            }
        }

        function envoyerAuPython(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;

            // Envoi des donn√©es vers ton script Python via fetch
            fetch('/ma-meteo', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ lat: lat, lon: lon })
            })
            .then(response => response.json())
            .then(data => {
                // Affichage de la r√©ponse de Python
                document.getElementById("resultat").innerHTML = 
                    `Il fait ${data.main.temp}¬∞C √† ${data.name}`;
            });
        }

        function gererErreur(error) {
            console.log("Erreur GPS, bascule vers IP...");
            // C'est ici que tu mettrais ton appel IP-API de secours !
        }
    </script>
</body>
</html>